{#
/**
 * @file
 * News full display.
 */
#}

{# Set the description list items #}
{% set description_items = [] %}
{% for field in content %}
  {% if field['#field_name'] in ['oe_event_dates', 'oe_location'] %}
    {% set description_items = description_items|merge(
      [
        {
          term: { 
            'label': field['#title'],
            'icon': 'calendar-event',
          },
          'definition': field|render|striptags,
        },
      ]) 
    %}
  {% endif %}
{% endfor %}

{# Set inpage navigation links and content #}
{% set inpage_navigation_fields %}
  {{ content.body }}
  {{ content.oe_documents }}
{% endset %}

{% set inpage_navigation_links = [] %}
{% for field in content %}
  {% if field['#field_name'] in ['body', 'oe_documents'] %}
    {% set inpage_navigation_links = inpage_navigation_links|merge(
      [
        {
          label: field['#title'],
          path: '#' ~ field['#bundle'] ~ '__' ~ field['#field_name'],
        }
      ]) 
    %}
  {% endif %}
{% endfor %}

{{ pattern('content_banner', {
  background: 'gray',
  title: label,
  content: content.oe_summary,
  image: image,
  meta: [
    content.oe_publication_date|render|striptags,
  ],
  badges: badges|render|default([])
}) }}

{{ pattern('description_list', {
  'items': description_items,
  'variant': 'horizontal',
  'attributes': attributes.addClass(["mt-3", "mb-4"]),
}) }}

{{ pattern('inpage_navigation', {
  'title': 'Page content',
  'links': inpage_navigation_links,
  'content': inpage_navigation_fields,
  'full_layout': true,
}) }}
